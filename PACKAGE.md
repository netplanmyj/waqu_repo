# 配布用パッケージ作成手順

この手順書では、水質報告アプリの配布用パッケージ（ZIP）を作成する方法を説明します。

## 📦 配布パッケージの構成

### 基本構成
```
waqu_repo_release_v1.0.0/
├── 📱 waqu_repo_v1.0.0.apk         # Androidアプリ本体
├── 🚀 QUICKSTART.md                # 5分で始める簡単ガイド
├── 📖 DEPLOY.md                    # 詳細セットアップ手順
├── 📋 README.md                    # プロジェクト概要
├── 🛠️ BUILD.md                     # APKビルド手順（開発者向け）
├── 📁 gas/                         # Google Apps Script
│   ├── Code.gs                     # GASメイン処理ファイル
│   ├── appsscript.json             # GASプロジェクト設定
│   └── README.md                   # GAS設定説明
└── 📄 INSTALL.md                   # APKインストール手順
```

## 🔧 パッケージ作成手順

### ステップ1: APKファイルのビルド

```bash
# プロジェクトディレクトリに移動
cd waqu_repo

# 依存関係の更新
flutter pub get

# リリース用APKビルド
flutter build apk --release

# APKファイルをわかりやすい名前でコピー
cp build/app/outputs/flutter-apk/app-release.apk waqu_repo_v1.0.0.apk
```

### ステップ2: 配布ディレクトリの作成

```bash
# 配布用ディレクトリを作成
mkdir waqu_repo_release_v1.0.0
cd waqu_repo_release_v1.0.0

# APKファイルをコピー
cp ../waqu_repo_v1.0.0.apk .

# ドキュメントファイルをコピー
cp ../QUICKSTART.md .
cp ../DEPLOY.md .
cp ../README.md .
cp ../BUILD.md .

# GASディレクトリをコピー
cp -r ../gas .
```

### ステップ3: APKインストール手順書の作成

```bash
# INSTALL.mdを作成
cat > INSTALL.md << 'EOF'
# Android APKインストール手順

## 📱 インストール方法

### 事前準備
1. Androidデバイスの「設定」を開く
2. 「セキュリティ」または「アプリ」設定に移動
3. 「提供元不明のアプリ」または「不明なソースからのアプリ」を許可

### インストール手順
1. `waqu_repo_v1.0.0.apk` ファイルをAndroidデバイスにダウンロード
2. APKファイルをタップしてインストール実行
3. 「インストール」をタップして完了

### 初期設定
1. アプリを起動
2. 右上の歯車アイコン（⚙️）をタップ
3. 🚀 `QUICKSTART.md` に従って設定完了

## ⚠️ 注意事項
- このアプリはGoogle Playストア外での配布です
- 信頼できる提供元からのみインストールしてください
- 初回起動時にセキュリティ警告が表示される場合がありますが、正常です

## 🆘 問題が発生した場合
- デバイスの「アプリ管理」でアンインストール後、再インストール
- `DEPLOY.md` の詳細手順を参照
EOF
```

### ステップ4: ファイルの検証

```bash
# ファイル構成の確認
tree .

# または
ls -la
ls -la gas/

# APKファイルのサイズ確認
ls -lh *.apk
```

### ステップ5: ZIPファイルの作成

```bash
# 親ディレクトリに移動
cd ..

# ZIPファイルを作成
zip -r waqu_repo_release_v1.0.0.zip waqu_repo_release_v1.0.0/

# ZIPファイルのサイズ確認
ls -lh waqu_repo_release_v1.0.0.zip
```

## 📋 配布前チェックリスト

### ✅ ファイル確認
- [ ] APKファイルが含まれている
- [ ] 全てのドキュメントファイルが含まれている
- [ ] GASディレクトリが完全にコピーされている
- [ ] ファイル名にバージョン番号が含まれている

### ✅ 動作確認
- [ ] APKファイルが正常にインストールできる
- [ ] アプリが正常に起動する
- [ ] GASコードが正常に動作する
- [ ] テスト送信が成功する

### ✅ ドキュメント確認
- [ ] QUICKSTARTガイドの手順が正確
- [ ] DEPLOY手順が最新の状態
- [ ] バージョン情報が正しい
- [ ] 連絡先情報が含まれている

## 🚀 配布方法

### 選択肢1: 直接配布
```bash
# USBドライブにコピー
cp waqu_repo_release_v1.0.0.zip /path/to/usb/

# メール添付で送信（サイズに注意）
```

### 選択肢2: クラウドストレージ
```bash
# Google Driveにアップロード
# Dropboxにアップロード
# 組織内ファイルサーバーにアップロード
```

### 選択肢3: GitHubリリース
```bash
# GitHubのReleasesページでZIPファイルを公開
# タグ付きリリースとして配布
```

## 📊 バージョン管理

### バージョン番号の付け方
- **メジャー更新**: `v2.0.0` (大きな機能追加・変更)
- **マイナー更新**: `v1.1.0` (機能追加)
- **パッチ更新**: `v1.0.1` (バグ修正)

### リリースノートの作成
```markdown
## waqu_repo v1.0.0 リリースノート

### 新機能
- 水質報告の自動メール送信
- デバッグモード対応
- 送信履歴管理

### 改善点
- UIの最適化
- エラーハンドリングの強化

### 修正項目
- 初期リリース
```

## 🔐 セキュリティ考慮事項

### APKファイルの検証
```bash
# APKのハッシュ値を計算（改ざん検知用）
shasum -a 256 waqu_repo_v1.0.0.apk > checksum.txt

# ZIPファイルにチェックサムを含める
cp checksum.txt waqu_repo_release_v1.0.0/
```

### 配布時の注意
- 信頼できる配布チャネルを使用
- ファイルの整合性確認方法を提供
- セキュリティガイドラインを含める

## 📞 サポート体制

### 配布時に含める情報
- 連絡先情報
- サポート対応時間
- よくある質問（FAQ）
- アップデート通知方法

---

**📦 配布パッケージ作成完了！**

これで水質報告アプリの配布準備が整いました。利用者は簡単にアプリをセットアップして使用開始できます。